{% extends "base.njk" %}
{% set pageTitle = "Download your document to your GOV.UK Wallet" %}
{% block content %}
    <link rel="stylesheet" href="/assets/jsontree.js.css">
    <script src="/assets/jsontree.js"></script>
    <h1 class="govuk-heading-l govuk-!-margin-top-3">Example GOV.UK Wallet Credential Issuer</h1>
    <h1 class="govuk-heading-m">Quick links:</h1>
    <p class="govuk-body"></p><a href="#preauth">Pre-auth code</a>
    <p class="govuk-body"></p><a href="#access">Access Token</a>
    <p class="govuk-body"></p><a href="#tokenclaims">Token Claims</a>
    <p class="govuk-body"></p><a href="#proofjwt">Proof JWT</a>
    <p class="govuk-body"></p><a href="#credential">Credential</a>
    <p class="govuk-body"></p><a href="#claims">Credential Claims</a>
    <h1 class="govuk-heading-m" id="preauth">Pre-authorised Code:</h1>
    <p class="govuk-body">{{ preAuthorizedCode }}</p>
    <h1 class="govuk-heading-m" id="access">Access Token:</h1>
    <p class="govuk-body">{{ accessToken }}</p>
    <p class="govuk-body" id="tokenclaims">{{ tokenClaims }}</p>
    <h1 class="govuk-heading-m" id="proofjwt">Proof JWT:</h1>
    <p class="govuk-body">{{ proofJwt }}</p>
    <h1 class="govuk-heading-m" id="credential">Credential:</h1>
    <p class="govuk-body">{{ credential }}</p>
    {% if credentialClaims %}
        <h1 class="govuk-heading-m" id="claims">Credential Claims:</h1>
        <script>
            const credentialClaims = {{ credentialClaims | dump | safe }}
        </script>
        <div id="tree-1" data-jsontree-js="credentialClaims"></div>
    {% endif %}
    {% if credentialSignature %}
        <script>
            const credentialSignature = {{ credentialSignature | dump | safe }}
        </script>
        <div id="tree-2" data-jsontree-js="credentialSignature"></div>
    {% endif %}
    {% if credentialSignaturePayload %}
        <script>
            const credentialSignaturePayload = {{ credentialSignaturePayload | dump | safe }}
        </script>
        <div id="tree-3" data-jsontree-js="credentialSignaturePayload"></div>
    {% endif %}
{% endblock %}
