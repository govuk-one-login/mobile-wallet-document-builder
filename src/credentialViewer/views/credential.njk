{% extends "base.njk" %}
{% set pageTitle = "Download your document to your GOV.UK Wallet" %}
{% block content %}
    <h1 class="govuk-heading-l govuk-!-margin-top-3">Example GOV.UK Wallet Credential Issuer</h1>
    <h1 class="govuk-heading-m">Pre-authorised Code:</h1>
    <p class="govuk-body">{{ preAuthorizedCode }}</p>
    <h1 class="govuk-heading-m">Access Token:</h1>
    <p class="govuk-body">{{ accessToken }}</p>
    <p class="govuk-body">{{ tokenClaims }}</p>
    <h1 class="govuk-heading-m">Proof JWT:</h1>
    <p class="govuk-body">{{ proofJwt }}</p>
    <h1 class="govuk-heading-m">Credential:</h1>
    <p class="govuk-body">{{ credential }}</p>
    <button type="button" class="govuk-button govuk-button--secondary" onclick="copyToClipboard()"
    >
      Copy Credential
    </button>
   <script>
     function copyToClipboard() {
       const text= document.getElementById('credential').innerText
       navigator.clipboard.writeText(text).then(()=> {
         const status = document.getElementById("copy-status")
         status.textContent = "Copied to clipboard"
         status.classList.remove("govuk-visually-hidden")
       })
     }
   </script>
    {% if credentialClaims %}
        <h1 class="govuk-heading-m">Credential Claims:</h1>
        <pre>{{ credentialClaims | safe }}</pre>
    {% endif %}
{% endblock %}
