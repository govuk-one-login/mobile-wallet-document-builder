{% extends "base.njk" %}
{% set pageTitle = "Download your document to your GOV.UK Wallet" %}
{% block content %}
    <h1 class="govuk-heading-l govuk-!-margin-top-3">Example GOV.UK Wallet Credential Issuer</h1>
    <h1 class="govuk-heading-m">Pre-authorised Code:</h1>
    <p class="govuk-body">{{ preAuthorizedCode }}</p>
    <h1 class="govuk-heading-m">Access Token:</h1>
    <p class="govuk-body">{{ accessToken }}</p>
    <p class="govuk-body">{{ tokenClaims }}</p>
    <h1 class="govuk-heading-m">Proof JWT:</h1>
    <p class="govuk-body">{{ proofJwt }}</p>
    <h1 class="govuk-heading-m">Credential:</h1>
    <p class="govuk-body">{{ credential }}</p>
    <button id="copy-credential-btn" class="govuk-button govuk-button--secondary" data-module="govuk-button">
      Copy Credential
    </button>
   <script>
     document.getElementById('copy-credential-btn').addEventListener('click', function() {
       const link = window.location.href;
       navigator.clipboard.writeText(link).then(function() {
         const originalText = this.textContent;
         this.textContent = 'Link Copied!';
         setTimeout(() => {
           this.textContent = originalText;
         }, 2000);
       }, function(err) {
         console.error('Could not copy text: ', err);
       });
     });
   </script>
    {% if credentialClaims %}
        <h1 class="govuk-heading-m">Credential Claims:</h1>
        <pre>{{ credentialClaims | safe }}</pre>
    {% endif %}
{% endblock %}
